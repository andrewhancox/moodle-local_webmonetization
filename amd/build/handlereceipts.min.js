define ("local_webmonetization/handlereceipts",["core/ajax"],function(a){return{init:function init(b,c){if(document.monetization){document.monetization.addEventListener("monetizationprogress",function(d){var e=a.call([{methodname:"local_webmonetization_handlereceipt",args:{receipt:d.detail.receipt,contextid:M.cfg.contextid}}]);if(b){var f=M.cfg.wwwroot+"/local/webmonetization/interstitial.php?contextid="+M.cfg.contextid;e[0].done(function(a){if(!0!==a){window.location.href=f}else if(c){window.location.href=c}}).fail(function(){window.location.href=f})}})}else if(b){var d=M.cfg.wwwroot+"/local/webmonetization/failed.php?contextid="+M.cfg.contextid;window.location.href=d}}}});
//# sourceMappingURL=handlereceipts.min.js.map
